import{o as N,i as O}from"./lifecycle.BUdnxebf.js";import{q,v as R,c as D,f as F,a as L,p as J,b as U,s as i,g as t,i as v,m as y,u as b,e as z,r as T,t as W,d as X,w as B}from"./template.CPXyBZoS.js";import{e as x}from"./utils.nNk4BeOt.js";import{i as H}from"./if.CsDsK0Yx.js";import{p as Y,s as E,a as Z}from"./props.DO61WAiE.js";import{s as $,a as _}from"./config.dR5stsED.js";import{i as f}from"./translation.CCjw6gXK.js";import{I as p}from"./zh_TW.B395Vq90.js";/* empty css                        */var tt=B('<svg class="w-5 h-5 icon-transition svelte-8vwu4q" fill="currentColor" viewBox="0 0 24 24"><path d="M4 6h16v2H4zm0 5h16v2H4zm0 5h16v2H4z" class="svelte-8vwu4q"></path></svg>'),et=B('<svg class="w-5 h-5 icon-transition svelte-8vwu4q" fill="currentColor" viewBox="0 0 24 24"><path d="M3 3h7v7H3V3zm0 11h7v7H3v-7zm11-11h7v7h-7V3zm0 11h7v7h-7v-7z" class="svelte-8vwu4q"></path></svg>'),st=X('<button type="button"><div class="icon-container w-5 h-5 flex items-center justify-center relative svelte-8vwu4q"><!></div></button>');function vt(j,k){U(k,!1);let S=Y(k,"currentLayout",12,"list"),u=y(!1),c=y(!1),m=y(!1),o=y("list"),n=null;const A=$.responsive?.breakpoints?.desktop??1280;function G(e){typeof window<"u"&&window.dispatchEvent(new CustomEvent("layoutChange",{detail:{layout:e}}))}function C(e){sessionStorage.setItem("postListLayout",e),localStorage.setItem("postListLayout",e)}function M(){return sessionStorage.getItem("postListLayout")}function K(){if(!t(u)||t(c)||t(m))return;i(m,!0);const e=t(o)==="list"?"grid":"list";i(o,e),C(e)}function P(){i(m,!1)}function w(e){i(c,!e.matches)}N(()=>{i(u,!0);const e=M(),a=_.postListLayout.defaultMode;e==="list"||e==="grid"?(i(o,e),localStorage.getItem("postListLayout")!==e&&localStorage.setItem("postListLayout",e)):(i(o,a),C(a)),n=window.matchMedia(`(min-width: ${A}px)`),w(n),n.addEventListener?n.addEventListener("change",w):n.addListener(w);const d=s=>{s.detail?.layout&&i(o,s.detail.layout)},r=()=>{setTimeout(()=>{const s=M();s==="list"||s==="grid"?i(o,s):i(o,_.postListLayout.defaultMode)},200)};window.addEventListener("layoutChange",d);const g=()=>{const s=window.swup;s?.hooks?(s.hooks.on("content:replace",r),s.hooks.on("page:view",r)):window.addEventListener("popstate",r)};return window.swup?g():setTimeout(g,200),()=>{n&&(n.removeEventListener?n.removeEventListener("change",w):n.removeListener(w)),window.removeEventListener("layoutChange",d),window.removeEventListener("popstate",r);const s=window.swup;s?.hooks&&(s.hooks.off("content:replace",r),s.hooks.off("page:view",r))}}),q(()=>(t(c),t(o)),()=>{S(t(c)?"list":t(o))}),q(()=>(t(u),v(S())),()=>{t(u)&&G(S())}),R(),O();var I=D(),Q=F(I);{var V=e=>{var a=st(),d=z(a),r=z(d);{var g=l=>{var h=tt();L(l,h)},s=l=>{var h=et();L(l,h)};H(r,l=>{t(o)==="list"?l(g):l(s,!1)})}T(d),T(a),W((l,h)=>{E(a,"aria-label",l),E(a,"aria-pressed",t(o)==="grid"),Z(a,1,`btn-plain scale-animation rounded-lg h-11 w-11 active:scale-90 flex items-center justify-center theme-switch-btn ${t(m)?"switching":""}`,"svelte-8vwu4q"),a.disabled=t(m),E(a,"title",h)},[()=>(t(o),v(f),v(p),b(()=>t(o)==="list"?f(p.switchToGridMode):f(p.switchToListMode))),()=>(t(o),v(f),v(p),b(()=>t(o)==="list"?f(p.switchToGridMode):f(p.switchToListMode)))]),x("animationend",d,P),x("click",a,K),L(e,a)};H(Q,e=>{t(u),v(_),t(c),b(()=>t(u)&&_.postListLayout.allowSwitch&&!t(c))&&e(V)})}L(j,I),J()}export{vt as default};
